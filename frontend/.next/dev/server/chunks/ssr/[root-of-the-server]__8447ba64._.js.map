{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///D:/StrikeIQ/frontend/components/OAuthHandler.tsx"],"sourcesContent":["import { useEffect } from 'react';\r\n\r\ninterface OAuthHandlerProps {\r\n  onAuthSuccess: () => void;\r\n}\r\n\r\nexport default function OAuthHandler({ onAuthSuccess }: OAuthHandlerProps) {\r\n  useEffect(() => {\r\n    // Check if we're returning from Upstox OAuth with success\r\n    const urlParams = new URLSearchParams(window.location.search);\r\n    const authStatus = urlParams.get('status');\r\n    \r\n    if (authStatus === 'success' && window.location.pathname.includes('/auth/success')) {\r\n      console.log('OAuth success detected, triggering auth refresh immediately');\r\n      \r\n      // SECURITY: No state validation needed - backend handles it\r\n      // Clean up any stored data\r\n      sessionStorage.removeItem('oauth_state');\r\n      sessionStorage.removeItem('upstox_auth_url');\r\n      \r\n      // Trigger auth success callback immediately\r\n      onAuthSuccess();\r\n      \r\n      // Then redirect to dashboard after a short delay\r\n      setTimeout(() => {\r\n        window.location.href = '/';\r\n      }, 500);\r\n    }\r\n  }, [onAuthSuccess]);\r\n\r\n  return null; // This component doesn't render anything\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;;AAMe,SAAS,aAAa,EAAE,aAAa,EAAqB;IACvE,IAAA,gHAAS,EAAC;QACR,0DAA0D;QAC1D,MAAM,YAAY,IAAI,gBAAgB,OAAO,QAAQ,CAAC,MAAM;QAC5D,MAAM,aAAa,UAAU,GAAG,CAAC;QAEjC,IAAI,eAAe,aAAa,OAAO,QAAQ,CAAC,QAAQ,CAAC,QAAQ,CAAC,kBAAkB;YAClF,QAAQ,GAAG,CAAC;YAEZ,4DAA4D;YAC5D,2BAA2B;YAC3B,eAAe,UAAU,CAAC;YAC1B,eAAe,UAAU,CAAC;YAE1B,4CAA4C;YAC5C;YAEA,iDAAiD;YACjD,WAAW;gBACT,OAAO,QAAQ,CAAC,IAAI,GAAG;YACzB,GAAG;QACL;IACF,GAAG;QAAC;KAAc;IAElB,OAAO,MAAM,yCAAyC;AACxD"}},
    {"offset": {"line": 61, "column": 0}, "map": {"version":3,"sources":["file:///D:/StrikeIQ/frontend/pages/auth/success.tsx"],"sourcesContent":["import { useEffect, useState } from 'react'\r\nimport { useRouter } from 'next/router'\r\nimport Head from 'next/head'\r\nimport { useAuth } from '../../contexts/AuthContext'\r\nimport OAuthHandler from '../../components/OAuthHandler'\r\n\r\nexport default function AuthSuccess() {\r\n  const router = useRouter()\r\n  const { checkAuth } = useAuth()\r\n  const [status, setStatus] = useState('loading')\r\n\r\n  useEffect(() => {\r\n    const urlParams = new URLSearchParams(window.location.search)\r\n    const authStatus = urlParams.get('status')\r\n    \r\n    setStatus(authStatus || 'unknown')\r\n    \r\n    // If auth successful, trigger auth context refresh and redirect\r\n    if (authStatus === 'success') {\r\n      console.log('OAuth success detected, triggering auth refresh and redirect')\r\n      \r\n      // Trigger auth context refresh immediately\r\n      checkAuth().then(() => {\r\n        // Redirect to dashboard after short delay\r\n        setTimeout(() => {\r\n          router.push('/')\r\n        }, 500)\r\n      })\r\n    }\r\n  }, [router, checkAuth])\r\n\r\n  return (\r\n    <>\r\n      <Head>\r\n        <title>Authentication Status - StrikeIQ</title>\r\n        <meta name=\"description\" content=\"Upstox authentication status\" />\r\n      </Head>\r\n      \r\n      <div className=\"min-h-screen bg-gradient-to-br from-gray-900 via-blue-900 to-purple-900 flex items-center justify-center\">\r\n        <div className=\"text-center\">\r\n          <OAuthHandler onAuthSuccess={() => {\r\n            setStatus('success');\r\n            setTimeout(() => {\r\n              checkAuth().then(() => {\r\n                router.push('/')\r\n              })\r\n            }, 1000);\r\n          }} />\r\n          {status === 'success' ? (\r\n            <>\r\n              <div className=\"mb-8\">\r\n                <div className=\"w-20 h-20 bg-green-500 rounded-full flex items-center justify-center mx-auto mb-4\">\r\n                  <svg className=\"w-10 h-10 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M5 13l4 4L19 7\" />\r\n                  </svg>\r\n                </div>\r\n                <h1 className=\"text-3xl font-bold text-white mb-2\">Authentication Successful!</h1>\r\n                <p className=\"text-gray-300 mb-4\">Your Upstox account has been connected successfully</p>\r\n                <p className=\"text-sm text-gray-400\">Redirecting to dashboard...</p>\r\n              </div>\r\n              \r\n              <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-white mx-auto\"></div>\r\n            </>\r\n          ) : (\r\n            <>\r\n              <div className=\"mb-8\">\r\n                <div className=\"w-20 h-20 bg-red-500 rounded-full flex items-center justify-center mx-auto mb-4\">\r\n                  <svg className=\"w-10 h-10 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\r\n                  </svg>\r\n                </div>\r\n                <h1 className=\"text-3xl font-bold text-white mb-2\">Authentication Failed</h1>\r\n                <p className=\"text-gray-300\">There was an issue connecting your Upstox account</p>\r\n              </div>\r\n              \r\n              <button\r\n                onClick={() => router.push('/')}\r\n                className=\"bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-6 rounded-lg transition-colors\"\r\n              >\r\n                Try Again\r\n              </button>\r\n            </>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;AACA;AACA;;;;;;;AAEe,SAAS;IACtB,MAAM,SAAS,IAAA,oIAAS;IACxB,MAAM,EAAE,SAAS,EAAE,GAAG,IAAA,4HAAO;IAC7B,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,+GAAQ,EAAC;IAErC,IAAA,gHAAS,EAAC;QACR,MAAM,YAAY,IAAI,gBAAgB,OAAO,QAAQ,CAAC,MAAM;QAC5D,MAAM,aAAa,UAAU,GAAG,CAAC;QAEjC,UAAU,cAAc;QAExB,gEAAgE;QAChE,IAAI,eAAe,WAAW;YAC5B,QAAQ,GAAG,CAAC;YAEZ,2CAA2C;YAC3C,YAAY,IAAI,CAAC;gBACf,0CAA0C;gBAC1C,WAAW;oBACT,OAAO,IAAI,CAAC;gBACd,GAAG;YACL;QACF;IACF,GAAG;QAAC;QAAQ;KAAU;IAEtB,qBACE;;0BACE,qKAAC,gIAAI;;kCACH,qKAAC;kCAAM;;;;;;kCACP,qKAAC;wBAAK,MAAK;wBAAc,SAAQ;;;;;;;;;;;;0BAGnC,qKAAC;gBAAI,WAAU;0BACb,cAAA,qKAAC;oBAAI,WAAU;;sCACb,qKAAC,+HAAY;4BAAC,eAAe;gCAC3B,UAAU;gCACV,WAAW;oCACT,YAAY,IAAI,CAAC;wCACf,OAAO,IAAI,CAAC;oCACd;gCACF,GAAG;4BACL;;;;;;wBACC,WAAW,0BACV;;8CACE,qKAAC;oCAAI,WAAU;;sDACb,qKAAC;4CAAI,WAAU;sDACb,cAAA,qKAAC;gDAAI,WAAU;gDAAuB,MAAK;gDAAO,QAAO;gDAAe,SAAQ;0DAC9E,cAAA,qKAAC;oDAAK,eAAc;oDAAQ,gBAAe;oDAAQ,aAAa;oDAAG,GAAE;;;;;;;;;;;;;;;;sDAGzE,qKAAC;4CAAG,WAAU;sDAAqC;;;;;;sDACnD,qKAAC;4CAAE,WAAU;sDAAqB;;;;;;sDAClC,qKAAC;4CAAE,WAAU;sDAAwB;;;;;;;;;;;;8CAGvC,qKAAC;oCAAI,WAAU;;;;;;;yDAGjB;;8CACE,qKAAC;oCAAI,WAAU;;sDACb,qKAAC;4CAAI,WAAU;sDACb,cAAA,qKAAC;gDAAI,WAAU;gDAAuB,MAAK;gDAAO,QAAO;gDAAe,SAAQ;0DAC9E,cAAA,qKAAC;oDAAK,eAAc;oDAAQ,gBAAe;oDAAQ,aAAa;oDAAG,GAAE;;;;;;;;;;;;;;;;sDAGzE,qKAAC;4CAAG,WAAU;sDAAqC;;;;;;sDACnD,qKAAC;4CAAE,WAAU;sDAAgB;;;;;;;;;;;;8CAG/B,qKAAC;oCACC,SAAS,IAAM,OAAO,IAAI,CAAC;oCAC3B,WAAU;8CACX;;;;;;;;;;;;;;;;;;;;;AASf"}}]
}